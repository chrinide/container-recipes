Bootstrap: localimage
From: ../../base/centos/centos.sif

%help
    Test container for Quantum ESPRESSO.

%labels
    MAINTAINER William Huhn (will@huhn.tech)
    VERSION ???

%post
    QE_VERSION=6.6

    cd /
    git clone https://gitlab.com/QEF/q-e.git
    cd q-e && git checkout qe-${QE_VERSION}
    # Note: when OpenMP is enabled, the system FFTW3 library
    #       is not picked up during configure and will be
    #       built during QE install instead
    ./configure --enable-openmp --with-hdf5=/usr/local/
    make all epw && make install
    rm -rf /q-e/
